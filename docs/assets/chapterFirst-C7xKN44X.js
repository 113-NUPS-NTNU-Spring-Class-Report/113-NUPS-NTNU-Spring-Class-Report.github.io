var g=Object.defineProperty;var r=(l,t,o)=>t in l?g(l,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[t]=o;var n=(l,t,o)=>(r(l,typeof t!="symbol"?t+"":t,o),o);import"./main-R6-TiNIX.js";class h{constructor(t){n(this,"backgroundImage");n(this,"title");n(this,"dialog");n(this,"speaker");n(this,"content");n(this,"options");this.backgroundImage=t.backgroundImage,this.title=t.title,this.dialog=t.dialog,this.speaker=t.speaker,this.content=t.content,this.options=t.options}setToggleBackgroundImage(t){this.backgroundImage.querySelector("img").src=t}toggleBackgroundImage(){this.backgroundImage.style.display==="none"?this.backgroundImage.style.display="block":this.backgroundImage.style.display="none"}setTitle(t){this.title.classList.contains("active")&&this.title.classList.remove("active"),this.title.innerText=t,setTimeout(()=>{this.title.classList.add("active")},1e3)}toggleDialog(){this.dialog.style.display==="none"?this.dialog.style.display="block":this.dialog.style.display="none"}toggleOptions(){this.options.style.display==="none"?this.options.style.display="block":this.options.style.display="none"}setOptions(t){this.options.querySelectorAll("#option").forEach(s=>{this.options.removeChild(s)}),t.forEach(s=>{if(!s.text||!s.event)throw new Error("The 'Options' missing parameter");const a=document.createElement("p");a.innerText=s.text,a.id="option",a.onclick=function(){s.event()},this.options.appendChild(a)})}setSpeaker(){}setContent(t){const o=t.split(""),s=this.content;s.innerHTML.split("").length>0&&(s.innerHTML="");let a=0;function c(){a<o.length&&(s.innerHTML+=o[a++],setTimeout(c,60))}c()}}class p{constructor(t,o,s,a,c,d){n(this,"backgroundImage");n(this,"title");n(this,"dialog");n(this,"speaker");n(this,"content");n(this,"options");this.backgroundImage=t,this.title=o,this.dialog=s,this.speaker=a,this.content=c,this.options=d}}const u=document.querySelector("#background-image"),y=document.querySelector("#title"),k=document.querySelector("#dialog"),m=document.querySelector("#speaker"),b=document.querySelector("#content"),I=document.querySelector("#options"),f=new p(u,y,k,m,b,I),e=new h(f);class A{constructor(){n(this,"actions",[]);n(this,"totalDelay",0);this.actions=[],this.totalDelay=0}addAction(t,o){this.totalDelay=this.totalDelay+o,this.actions.push({action:t,delay:this.totalDelay})}start(){this.executeAction(0)}executeAction(t){if(t<this.actions.length){const{action:o,delay:s}=this.actions[t];setTimeout(()=>{o(),this.executeAction(t+1)},s)}}}e.toggleBackgroundImage();e.toggleDialog();e.toggleOptions();const i=new A;i.addAction(()=>{e.setTitle("Chp 1")},0);i.addAction(()=>{e.toggleDialog(),e.setContent("醒醒！快醒醒！")},1e3);i.addAction(()=>{e.setContent("我感受到一股力量在搖晃我的身體，耳朵也不時傳來焦慮的低語聲。")},4e3);i.addAction(()=>{e.setContent('我的眼前一片黑暗，而空氣中。。。似乎還迷茫著血腥味。。。我的大腦一片模糊，但我的第六感告訴我："我必須馬上起身！"')},0);i.addAction(()=>{e.toggleOptions(),e.setOptions([{text:"搖晃我的是誰？不對！我應該在等等，先裝死。",event:()=>{O()}},{text:"我强撐著身體，在攙扶下勉强坐起。",event:()=>{e.toggleOptions(),e.setContent("此時，大腦傳來陣痛感。貌似有什麽畫面從我腦海中一閃而過，但我現在來不及多想。")}}])},0);function O(){i.addAction(()=>{e.toggleOptions(),e.setContent("這裏到底是。。。？")},2e3),i.addAction(()=>{e.setContent("我的身體在冰冷的地面上，再仔細地感受一下，地面上伴隨著逐漸變的强烈的震動。")},4e3),i.addAction(()=>{e.setOptions([{text:"地面的震動我無法忽視，我的理智告訴我必須用盡全力起身。",event:()=>{}},{text:"我的身體好痛，肋骨好像刺穿了我的肺部。要不。。。就別起了。就這樣死去，也沒事吧。。。",event:()=>{e.toggleOptions(),v()}}]),e.toggleOptions()},4e3)}function v(){i.addAction(()=>{e.setContent("此時，大腦傳來陣痛感。一些零碎畫面逐漸在我腦海中浮現。")},2e3)}i.start();
