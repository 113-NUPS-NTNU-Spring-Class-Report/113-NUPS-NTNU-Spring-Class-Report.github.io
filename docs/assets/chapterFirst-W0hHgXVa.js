var u=Object.defineProperty;var y=(c,e,o)=>e in c?u(c,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[e]=o;var n=(c,e,o)=>(y(c,typeof e!="symbol"?e+"":e,o),o);import"./main-BaavKLZE.js";class k{constructor(e){n(this,"backgroundImage");n(this,"title");n(this,"dialog");n(this,"speaker");n(this,"content");n(this,"options");this.backgroundImage=e.backgroundImage,this.title=e.title,this.dialog=e.dialog,this.speaker=e.speaker,this.content=e.content,this.options=e.options}setToggleBackgroundImage(e){this.backgroundImage.querySelector("img").src=e}toggleBackgroundImage(){this.backgroundImage.style.display==="none"?this.backgroundImage.style.display="block":this.backgroundImage.style.display="none"}setTitle(e){this.title.classList.contains("active")&&this.title.classList.remove("active"),this.title.innerText=e,setTimeout(()=>{this.title.classList.add("active")},1e3)}toggleDialog(){this.dialog.style.display==="none"?this.dialog.style.display="block":this.dialog.style.display="none"}toggleOptions(){this.options.style.display==="none"?this.options.style.display="block":this.options.style.display="none"}setOptions(e){this.options.querySelectorAll("#option").forEach(s=>{this.options.removeChild(s)}),e.forEach(s=>{if(!s.text||!s.event)throw new Error("The 'Options' missing parameter");const i=document.createElement("p");i.innerText=s.text,i.id="option",i.onclick=function(){s.event()},this.options.appendChild(i)})}setSpeaker(){}setContent(e){const o=e.split(""),s=this.content;s.innerHTML.split("").length>0&&(s.innerHTML="");let i=0;function g(){i<o.length&&(s.innerHTML+=o[i++],setTimeout(g,60))}g()}}class m{constructor(e,o,s,i,g,h){n(this,"backgroundImage");n(this,"title");n(this,"dialog");n(this,"speaker");n(this,"content");n(this,"options");this.backgroundImage=e,this.title=o,this.dialog=s,this.speaker=i,this.content=g,this.options=h}}const A=document.querySelector("#background-image"),C=document.querySelector("#title"),b=document.querySelector("#dialog"),O=document.querySelector("#speaker"),v=document.querySelector("#content"),I=document.querySelector("#options"),f=new m(A,C,b,O,v,I),t=new k(f);class r{constructor(){n(this,"actions",[]);n(this,"totalDelay",0);this.actions=[],this.totalDelay=0}addAction(e,o){this.totalDelay=this.totalDelay+o,this.actions.push({action:e,delay:this.totalDelay})}start(){this.executeAction(0)}executeAction(e){if(e<this.actions.length){const{action:o,delay:s}=this.actions[e];setTimeout(()=>{o(),this.executeAction(e+1)},s)}}}t.toggleBackgroundImage();t.toggleDialog();t.toggleOptions();const l=new r,d=new r;d.addAction(()=>{t.toggleOptions(),t.setContent("這裏到底是...？")},0);d.addAction(()=>{t.setContent("我的身體在冰冷的地面上，再仔細地感受一下，地面上伴隨著逐漸變的强烈的震動。")},4e3);d.addAction(()=>{t.setOptions([{text:"地面的震動我無法忽視，我的理智告訴我必須用盡全力起身。",event:()=>{t.toggleOptions(),t.setContent("我强撐著身體，在攙扶下勉强坐起。"),d.addAction(()=>{t.setContent("此時，大腦傳來陣痛感。貌似有什麽畫面從我腦海中一閃而過，但我現在來不及多想。")},2e3)}},{text:"我的身體好痛，肋骨好像刺穿了我的肺部。要不...就別起了。就這樣死去，也沒事吧...",event:()=>{t.toggleOptions(),a.start()}}]),t.toggleOptions()},4e3);const a=new r;a.addAction(()=>{t.setContent("此時，大腦傳來陣痛感。一些零碎畫面逐漸在我腦海中浮現。")},2e3);a.addAction(()=>{t.setContent("等等!這個一米以下，渾身包裹著黑霧的是什麼玩意!為什麼往我這裡衝來!而且還不止一隻!")},2e3);a.addAction(()=>{t.setContent("我轉過視角，身邊還有幾隻一樣的物種，也往我的方向襲來。")},3e3);a.addAction(()=>{t.setContent("眼見那些玩意逐漸靠近，我的心跳越跳越快，手腳逐漸冰涼無法動彈。")},3e3);a.addAction(()=>{t.setContent("在我要看清那些玩意的真面目時...")},3e3);a.addAction(()=>{t.setContent("時間回到現在...")},2e3);a.addAction(()=>{t.setContent("我的背部傳來一陣刺痛感...")},1e3);a.addAction(()=>{t.setOptions([{text:"清醒後,我隨著跩住我的手爬起來。",event:()=>{t.toggleOptions()}},{text:"疼痛控制了我的大腦,我遲疑了一下才爬起來。",event:()=>{t.toggleOptions(),p.start()}}]),t.toggleOptions()},0);const p=new r;p.addAction(()=>{},3e3);l.addAction(()=>{t.setTitle("Chp 1")},0);l.addAction(()=>{t.toggleDialog(),t.setContent("醒醒！快醒醒！")},6e3);l.addAction(()=>{t.setContent("我感受到一股力量在搖晃我的身體，耳朵也不時傳來焦慮的低語聲。")},1e3);l.addAction(()=>{t.setContent('我的眼前一片黑暗，而空氣中...似乎還迷茫著血腥味...我的大腦一片模糊，但我的第六感告訴我："我必須馬上起身！"')},0);l.addAction(()=>{t.toggleOptions(),t.setOptions([{text:"搖晃我的是誰？不對！我應該在等等，先裝死。",event:()=>{d.start()}},{text:"我强撐著身體，在攙扶下勉强坐起。",event:()=>{t.toggleOptions(),t.setContent("此時，大腦傳來陣痛感。貌似有什麽畫面從我腦海中一閃而過，但我現在來不及多想。")}}])},0);l.start();
